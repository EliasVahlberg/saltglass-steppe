{
  "quest_constraints": [
    {
      "quest_id": "the_broken_key",
      "category": "main",
      "accessibility_requirements": {
        "min_connectivity_score": 0.95,
        "requires_player_spawn_access": true,
        "max_blocked_objectives": 0
      },
      "spawn_requirements": {
        "required_biomes": ["ruins"],
        "required_microstructures": ["vitrified_library_ruins"],
        "min_structure_coverage": 0.5,
        "hostile_density_range": [0.4, 0.8]
      },
      "objective_requirements": [
        {
          "objective_id": "investigate_ruins",
          "objective_type": {
            "type": "reach",
            "x": 50,
            "y": 50
          },
          "spatial_requirements": {
            "min_accessible_area": 10,
            "max_distance_from_spawn": 100,
            "requires_line_of_sight": false,
            "requires_safe_path": true
          },
          "entity_requirements": []
        },
        {
          "objective_id": "examine_broken_key",
          "objective_type": {
            "type": "collect",
            "item_id": "broken_saint_key",
            "count": 1
          },
          "spatial_requirements": {
            "min_accessible_area": 1,
            "max_distance_from_spawn": 150,
            "requires_line_of_sight": false,
            "requires_safe_path": true
          },
          "entity_requirements": [
            {
              "entity_type": "item",
              "entity_id": "broken_saint_key",
              "must_be_reachable": true,
              "must_be_interactable": true,
              "min_spawn_chance": 1.0
            }
          ]
        }
      ]
    },
    {
      "quest_id": "pilgrims_last_angle",
      "category": "main",
      "accessibility_requirements": {
        "min_connectivity_score": 0.8,
        "requires_player_spawn_access": true,
        "max_blocked_objectives": 0
      },
      "spawn_requirements": {
        "required_biomes": [],
        "required_microstructures": [],
        "min_structure_coverage": 0.1,
        "hostile_density_range": [0.1, 0.4]
      },
      "objective_requirements": [
        {
          "objective_id": "find_dying_pilgrim",
          "objective_type": {
            "type": "talk_to",
            "npc_id": "dying_pilgrim"
          },
          "spatial_requirements": {
            "min_accessible_area": 4,
            "max_distance_from_spawn": 50,
            "requires_line_of_sight": false,
            "requires_safe_path": true
          },
          "entity_requirements": [
            {
              "entity_type": "npc",
              "entity_id": "dying_pilgrim",
              "must_be_reachable": true,
              "must_be_interactable": true,
              "min_spawn_chance": 1.0
            }
          ]
        }
      ]
    }
  ],
  "default_constraints": {
    "main_quest": {
      "accessibility_requirements": {
        "min_connectivity_score": 0.9,
        "requires_player_spawn_access": true,
        "max_blocked_objectives": 0
      },
      "spawn_requirements": {
        "required_biomes": [],
        "required_microstructures": [],
        "min_structure_coverage": 0.3,
        "hostile_density_range": [0.3, 0.7]
      }
    },
    "side_quest": {
      "accessibility_requirements": {
        "min_connectivity_score": 0.7,
        "requires_player_spawn_access": true,
        "max_blocked_objectives": 1
      },
      "spawn_requirements": {
        "required_biomes": [],
        "required_microstructures": [],
        "min_structure_coverage": 0.1,
        "hostile_density_range": [0.1, 0.5]
      }
    },
    "faction_quest": {
      "accessibility_requirements": {
        "min_connectivity_score": 0.8,
        "requires_player_spawn_access": true,
        "max_blocked_objectives": 1
      },
      "spawn_requirements": {
        "required_biomes": [],
        "required_microstructures": [],
        "min_structure_coverage": 0.2,
        "hostile_density_range": [0.2, 0.6]
      }
    }
  }
}
