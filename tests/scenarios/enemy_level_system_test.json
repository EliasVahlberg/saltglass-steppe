{
  "name": "Enemy Level System Test",
  "description": "Test that enemies spawn based on tile level and level-based spawn tables work correctly",
  "seed": 12345,
  "player": {
    "x": 10,
    "y": 10,
    "hp": 50,
    "ap": 10,
    "max_ap": 10
  },
  "actions": [
    {"turn": 0, "action": {"type": "debug_command", "command": "show_level"}},
    {"turn": 0, "action": {"type": "debug_command", "command": "spawn_enemy mirage_hound 15 10"}},
    {"turn": 0, "action": {"type": "debug_command", "command": "spawn_enemy crystal_devastator 20 10"}},
    {"turn": 0, "action": {"type": "end_turn"}}
  ],
  "assertions": [
    {
      "at_start": true,
      "check": {"type": "log_contains", "text": "Current tile level: 1"},
      "message": "Starting tile should be level 1 (safe area)"
    },
    {
      "at_end": true,
      "check": {"type": "enemy_at", "x": 15, "y": 10, "alive": true},
      "message": "Mirage hound (level 1 enemy) should spawn successfully"
    },
    {
      "at_end": true,
      "check": {"type": "enemy_at", "x": 20, "y": 10, "alive": true},
      "message": "Crystal devastator (level 10 enemy) should spawn successfully via debug command"
    },
    {
      "at_end": true,
      "check": {"type": "enemy_count", "op": "gte", "value": 2},
      "message": "Should have at least 2 enemies (spawned + naturally occurring)"
    }
  ]
}
