{
  "name": "rest_mechanic",
  "description": "Tests rest mechanic: healing, turn cost, enemy blocking",
  "seed": 42,
  "player": {
    "x": 10,
    "y": 10,
    "hp": 10,
    "max_hp": 20,
    "ap": 10,
    "max_ap": 10
  },
  "variables": {
    "debug_disable_glare": true
  },
  "entities": [
    {
      "entity_type": "enemy",
      "id": "salt_crawler",
      "x": 60,
      "y": 60,
      "hp": 8,
      "comment": "Far away - should not block resting (beyond FOV_RANGE of 32)"
    }
  ],
  "actions": [
    {
      "turn": 0,
      "comment": "Rest to recover HP (50% of max_hp = 10 HP)",
      "action": {
        "type": "rest"
      }
    }
  ],
  "assertions": [
    {
      "at_end": true,
      "check": {
        "type": "player_hp",
        "op": "ge",
        "value": 20
      },
      "message": "Player should be at full HP after resting"
    },
    {
      "at_end": true,
      "check": {
        "type": "turn",
        "op": "ge",
        "value": 10
      },
      "message": "Resting should advance at least 10 turns"
    },
    {
      "at_end": true,
      "check": {
        "type": "player_alive"
      }
    }
  ]
}
