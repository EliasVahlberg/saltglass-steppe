{
  "name": "faction_leaders_dialogue",
  "description": "Test faction leader NPCs and their unique dialogue systems",
  "seed": 123,
  "map_setup": {
    "clear_radius": 15,
    "ensure_paths": [
      {"from_x": 10, "from_y": 10, "to_x": 20, "to_y": 10},
      {"from_x": 10, "from_y": 10, "to_x": 10, "to_y": 20},
      {"from_x": 10, "from_y": 10, "to_x": 20, "to_y": 20}
    ]
  },
  "player": {
    "x": 10,
    "y": 10,
    "hp": 20,
    "max_hp": 20,
    "inventory": ["prime_lens_complete"],
    "adaptations": ["Prismhide", "Sunveins"],
    "faction_reputation": {
      "Iron Covenant": 30,
      "Glass Prophets": -20,
      "Synthesis Seekers": 40
    }
  },
  "entities": [
    {
      "entity_type": "npc",
      "id": "forge_master_durgan",
      "x": 20,
      "y": 10
    },
    {
      "entity_type": "npc",
      "id": "high_prism",
      "x": 10,
      "y": 20
    },
    {
      "entity_type": "npc",
      "id": "saint_matthias",
      "x": 20,
      "y": 20
    }
  ],
  "quests": [
    {
      "quest_id": "vector_choice",
      "status": "active"
    }
  ],
  "actions": [
    {
      "turn": 0,
      "action": {
        "type": "move",
        "dx": 1,
        "dy": 0
      }
    },
    {
      "turn": 1,
      "action": {
        "type": "move",
        "dx": 1,
        "dy": 0
      }
    },
    {
      "turn": 2,
      "action": {
        "type": "move",
        "dx": 1,
        "dy": 0
      }
    },
    {
      "turn": 3,
      "action": {
        "type": "move",
        "dx": 1,
        "dy": 0
      }
    },
    {
      "turn": 4,
      "action": {
        "type": "move",
        "dx": 1,
        "dy": 0
      }
    },
    {
      "turn": 5,
      "action": {
        "type": "move",
        "dx": 1,
        "dy": 0
      }
    },
    {
      "turn": 6,
      "action": {
        "type": "move",
        "dx": 1,
        "dy": 0
      }
    },
    {
      "turn": 7,
      "action": {
        "type": "move",
        "dx": 1,
        "dy": 0
      }
    },
    {
      "turn": 8,
      "action": {
        "type": "move",
        "dx": 1,
        "dy": 0
      }
    },
    {
      "turn": 9,
      "action": {
        "type": "move",
        "dx": 1,
        "dy": 0
      }
    },
    {
      "turn": 10,
      "action": {
        "type": "start_dialogue",
        "target_x": 20,
        "target_y": 10
      }
    }
  ],
  "assertions": [
    {
      "at_turn": 1,
      "check": {
        "type": "npc_at",
        "x": 20,
        "y": 10,
        "npc_id": "forge_master_durgan"
      }
    },
    {
      "at_turn": 2,
      "check": {
        "type": "message_contains",
        "text": "silicate"
      }
    },
    {
      "at_turn": 3,
      "check": {
        "type": "npc_at",
        "x": 10,
        "y": 20,
        "npc_id": "high_prism"
      }
    },
    {
      "at_turn": 5,
      "check": {
        "type": "npc_at",
        "x": 20,
        "y": 20,
        "npc_id": "saint_matthias"
      }
    },
    {
      "at_turn": 6,
      "check": {
        "type": "message_contains",
        "text": "Prime Lens"
      }
    }
  ]
}
